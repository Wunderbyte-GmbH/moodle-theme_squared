define(["jquery","core/log"],function(a,b){"use strict";b.debug("Squared InFieldLabels AMD"),a.InFieldLabels=function(b,c,d){var e=this;e.$label=a(b),e.label=b,e.$field=a(c),e.field=c,e.$label.data("InFieldLabels",e),e.showing=!0,e.init=function(){var b;e.options=a.extend({},a.InFieldLabels.defaultOptions,d),e.options.className&&e.$label.addClass(e.options.className),setTimeout(function(){""!==e.$field.val()?(e.$label.hide(),e.showing=!1):(e.$label.show(),e.showing=!0)},200),e.$field.focus(function(){e.fadeOnFocus()}).blur(function(){e.checkForEmpty(!0)}).bind("keydown.infieldlabel",function(a){e.hideOnChange(a)}).bind("paste",function(){e.setOpacity(0)}).change(function(){e.checkForEmpty()}).bind("onPropertyChange",function(){e.checkForEmpty()}).bind("keyup.infieldlabel",function(){e.checkForEmpty()}),e.options.pollDuration>0&&(b=setInterval(function(){""!==e.$field.val()&&(e.$label.hide(),e.showing=!1,clearInterval(b))},e.options.pollDuration))},e.fadeOnFocus=function(){e.showing&&e.setOpacity(e.options.fadeOpacity)},e.setOpacity=function(a){e.$label.stop().animate({opacity:a},e.options.fadeDuration,function(){0===a&&e.$label.hide()}),e.showing=a>0},e.checkForEmpty=function(a){""===e.$field.val()?(e.prepForShow(),e.setOpacity(a?1:e.options.fadeOpacity)):e.setOpacity(0)},e.prepForShow=function(){e.showing||(e.$label.css({opacity:0}).show(),e.$field.bind("keydown.infieldlabel",function(a){e.hideOnChange(a)}))},e.hideOnChange=function(a){16!==a.keyCode&&9!==a.keyCode&&(e.showing&&(e.$label.hide(),e.showing=!1),e.$field.unbind("keydown.infieldlabel"))},e.init()},a.InFieldLabels.defaultOptions={fadeOpacity:.5,fadeDuration:300,pollDuration:0,enabledInputTypes:["text","search","tel","url","email","password","number","textarea"],className:!1},a.fn.inFieldLabels=function(b){var c=b&&b.enabledInputTypes||a.InFieldLabels.defaultOptions.enabledInputTypes;return this.each(function(){var d,e=a(this).attr("for");e&&(d=document.getElementById(e))&&(-1===a.inArray(d.type,c)&&"TEXTAREA"!==d.nodeName||new a.InFieldLabels(this,d,b))})}});