/**
 * This is the squared theme.
 *
 * The squared theme makes uses a custom version of squared blocks
 *
 * @package theme_squared
 * @copyright 2018 onwards Onlinecampus Virtuelle PH
 * www.virtuelle-ph.at, David Bogner www.edulabs.org
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["jquery","core/log"],function(a,b){"use strict";return b.debug("Squared Category Course Search AMD initialised"),{init:function(c){a(document).ready(function(a){b.debug("Squared Category Course Search AMD init"),b.debug("Squared Category Course Search AJAX URL: "+c.theme);var d,e=c.catid,f=!1,g=function(c){c.preventDefault();var d=c.target.getAttribute("href");null===d&&(d=c.target.parentElement.getAttribute("href")),b.debug("Squared Category Course Search Page Link AJAX URL: "+d),null!==d&&a.ajax({url:d,data:{search:a("#sq-category-search").val(),categoryid:e},dataType:"html"}).done(function(c){a("#sqccs").html(c),h(),b.debug("Squared Category Course Search from pagination done: "+c)}).fail(function(){a("#sq-category-search").val("Category course pagination search call failed")})},h=function(){a("#sqccs .pagination li.page-item:not(.active) .page-link").click(function(a){g(a)}),a("#sqccs .paging a").click(function(a){g(a)})};a("#sq-category-search").prop("disabled",!1),a("#sq-category-search").on("change textInput input",function(){var g=a(this).val().length;g>2?(window.clearTimeout(d),d=window.setTimeout(function(d){a.ajax({url:c.theme,data:{search:d.val(),categoryid:e},dataType:"html"}).done(function(c){a("#sqccs").html(c),h(),b.debug("Squared Category Course Search done: "+c)}).fail(function(){a("#sq-category-search").val("Category course search call failed")}),f=!0},500,a(this))):0===g&&!0===f&&(a.ajax({url:c.theme,data:{search:"",categoryid:e},dataType:"html"}).done(function(c){a("#sqccs").html(c),h(),b.debug("Squared Category Course Search done: "+c)}).fail(function(){a("#sq-category-search").val("Category course search call failed")}),f=!1)}),h(),a("#sq-category-select").prop("disabled",!1),a("#sq-category-select").on("change",function(){var d=a("option:selected",this).val(),f=a("#sq-category-search").val();b.debug("Squared Select Category Course Search: "+d+" - "+f),a.ajax({url:c.theme,data:{search:f,categoryid:d},dataType:"html"}).done(function(c){e=d,a("#sqccs").html(c),h(),b.debug("Squared Select Category Course Search done: "+c)}).fail(function(){a("#sq-category-search").val("Select category course search call failed")})})})}}});