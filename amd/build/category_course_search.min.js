/**
 * This is the squared theme.
 *
 * The squared theme makes uses a custom version of squared blocks.
 *
 * @package theme_squared
 * @copyright 2018 onwards Onlinecampus Virtuelle PH
 * www.virtuelle-ph.at, David Bogner www.edulabs.org
 * @author G J Barnard - {@link http://moodle.org/user/profile.php?id=442195}
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["jquery","core/log"],function(a,b){"use strict";return b.debug("Squared Category Course Search AMD initialised"),{init:function(c){a(document).ready(function(a){b.debug("Squared Category Course Search AMD init"),b.debug("Squared Category Course Search AJAX URL: "+c.theme);var d,e=c.catid,f=!1,g=function(d,f,g,h){f=void 0!==f?f:e,g=void 0!==g&&g,h=void 0!==h?h:c.theme,a.ajax({url:h,data:{search:d,categoryid:f},dataType:"html"}).done(function(c){!0===g&&(e=f),a("#sqccs").html(c),i(),b.debug("Squared Select Category Course Search done: "+c)}).fail(function(){a("#sq-category-search").val("Select category course search call failed")})},h=function(c){c.preventDefault();var d=c.target.getAttribute("href");null===d&&(d=c.target.parentElement.getAttribute("href")),b.debug("Squared Category Course Search Page Link AJAX URL: "+d),null!==d&&g(a("#sq-category-search").val(),e,!1,d)},i=function(){a("#sqccs .pagination li.page-item:not(.active) .page-link").click(function(a){h(a)}),a("#sqccs .paging a").click(function(a){h(a)})};a("#sq-category-search").prop("disabled",!1),a("#sq-category-search").on("change textInput input",function(){var b=a(this).val().length;b>2?(window.clearTimeout(d),d=window.setTimeout(function(a){g(a.val()),f=!0},500,a(this))):0===b&&!0===f&&(g(""),f=!1)}),a("#sq-category-select").prop("disabled",!1),a("#sq-category-select").on("change",function(){var c=a("option:selected",this).val(),d=a("#sq-category-search").val();b.debug("Squared Select Category Course Search: "+c+" - "+d),g(d,c,!0)}),i()})}}});